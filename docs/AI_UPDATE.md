
## 首先实现一个节点选择功能：

用户鼠标悬浮在某节点时，在编辑器左侧的相应位置会出现一个 icon，当我将鼠标悬浮在这个 icon 时，所在节点被一个遮罩元素覆盖，为节点产生一个背景色效果。

1. 遮罩元素宽度为编辑器的宽度，高度为节点的高度，
2. 位置动态计算
3. 在编辑器/页面滚动、大小发生变化时能响应式计算大小位置

## 实现 AI 建议更新文本功能

我希望能实现下两种触发方式：

第一种：用户划词选中文本时显示格式化气泡菜单。
第二种：当用户点击节点对应的 icon 时显示格式化菜单。

### 格式化菜单

一个横向排列的菜单，包含以下分组的格式化文本的按钮，各组之间以分割线分隔

- 第一组：
  - 按钮，文本为 HotoMind
- 第二组：
  - 一个下拉菜单，选项为文本、一级标题、二级标题直到五级标题、有序列表、无序列表、引用
- 第三组：
  - 加粗
  - 斜体
  - 删除线
  - 下划线

### AI 菜单

当我点击格式化菜单的 HotoMind 按钮时，格式化菜单消失，取而代之出现两个气泡菜单：AI 对话菜单和 AI 命令菜单。

对话菜单：

左边是一个输入框（placeholder 为说说你的想法），右边是一个提交按钮

命令菜单：

两组命令，从上到下排列为

组名：智写

- 润色
- 扩写
- 简写
- 续写

组名：AI 工具

- 仿写
- 改写
- 解析内容

### 三个菜单的位置

格式化菜单：

1. 在划词选择文本或者选择节点的上方，与其居中对齐。
2. 在上方空间不够时显示到下方

对话和命令菜单：

1. 默认情况下，对话菜单在选中文本或节点下方，与其居中对齐；命令菜单在对话菜单下方，与对话菜单左对齐。
2. 在下方空间不够时显示到上方


三个菜单都要：

1. 考虑左右边界情况，当左右空间不够时可以不居中对齐，而是与边界对齐
2. 在编辑器滚动时要跟随选择文本或选择节点滚动
3. 编辑器、页面大小放生变化时可以重新计算位置与布局

### 补充

在划词后出现格式化菜单、对话菜单和命令菜单时，将选中文本使用单独的 span 元素包裹替换选中文本，为这个 span 元素添加样式让文本在所有菜单关闭前一直有一个背景色。关闭菜单后再使用文本替换掉这个span 元素。
注意！跨节点的划词要分别插入 span 节点

鼠标悬浮在节点对应的 icon 后出现的遮罩元素，在点击 icon 后直到所有菜单关闭都要一直显示。

